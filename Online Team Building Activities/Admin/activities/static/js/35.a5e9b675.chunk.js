(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[35],{363:function(t,e,n){"use strict";e.a=function(t){return(null!==t&&void 0!==t?t:"").split(" ").map((function(t){return""==t?t:t[0].toUpperCase()+t.slice(1).toLowerCase()})).join(" ")}},387:function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return b})),n.d(e,"e",(function(){return j})),n.d(e,"d",(function(){return p})),n.d(e,"f",(function(){return m})),n.d(e,"c",(function(){return h}));var a=n(11),i=n(2),c=n(68),o=n(102),r=n(63),s=n(49),l=n(99),u=n(363),d=function(){return function(t){t(Object(r.n)()),Promise.all([Object(o.a)(Object(c.a)("activities"),{method:"GET"}),Object(o.a)(Object(c.a)("getActivitiesData"))]).then((function(e){var n=e[0];if("OK"!=n.status)throw new Error(n);if("OK"==e[1].status){for(var a={},i=0;i<n.activities.length;i++)a[n.activities[i].parentId]=i;if(e[1].activityData)for(var c in e[1].activityData)n.activities[a[c]]&&(n.activities[a[c]].activityData=e[1].activityData[c])}t(Object(r.m)(n.activities))})).catch((function(e){console.log(e),t(Object(r.m)([],e))}))}},b=function(t){return function(e,n){var c=n().activities.activities,o=c.findIndex((function(e){return e.parentId==t.parentId}));o>=0?c[o]=Object(i.a)(Object(i.a)({},c[o]),t):c.push(t),e(Object(r.m)(Object(a.a)(c)))}},j=function(){return function(t){t(Object(r.s)()),Object(o.a)(Object(c.a)("myActivities"),{method:"GET"}).then((function(e){var n=e.myActivities.sort((function(t,e){return t.createdAt-e.createdAt}));t(Object(r.r)(n))})).catch((function(e){t(Object(r.r)([],e))}))}},p=function(t){return function(e){e(Object(l.d)("","Deleting template...",[],!0,(function(){}))),Object(o.a)(Object(c.a)("activity/"+t),{method:"DELETE"}).then((function(n){if("OK"!=n.status)throw new Error(n);e(Object(s.l)("Template deleted successfully","info")),e(Object(r.l)(t))})).catch((function(t){e(Object(s.l)("Oops! Something went wrong.","error"))})).finally((function(){e(Object(l.c)())}))}},m=function(t){return function(e){e(Object(l.d)("","public"==t.visibility?"Publishing template...":"Unpublishing template...",[],!0,(function(){})));var n=t._id;Object(o.a)(Object(c.a)("activity/"+n),{method:"PUT",body:JSON.stringify({data:{name:t.name,description:t.description,data:t.data,visibility:t.visibility}})}).then((function(n){if("OK"!=n.status)throw new Error(n);"public"==n.visibility?e(Object(s.l)("".concat(Object(u.a)(t.type)," submitted for review."),"info")):t.approved?e(Object(s.l)("".concat(Object(u.a)(t.type)," unpublished successfully"),"info")):e(Object(s.l)("Request withdrawn successfully.","info")),e(Object(r.t)(Object(i.a)(Object(i.a)({},t),{},{approved:!1})))})).catch((function(t){e(Object(s.l)("Oops! Something went wrong.","error"))})).finally((function(){e(Object(l.c)())}))}},h=function(){return function(t){t(Object(r.p)()),Object(o.a)(Object(c.a)("getAllActivityThemes")).then((function(e){if("OK"!=e.status||null===e||void 0===e||!e.themes)throw new Error(e);t(Object(r.o)(e.themes))})).catch((function(e){console.log(e),t(Object(r.o)([],e))}))}}},413:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var a=n(2),i=n(10),c=n(36),o=n(229),r=n(171),s=n(6),l=["Component","authenticated"];function u(t){var e=t.Component,n=(t.authenticated,Object(i.a)(t,l)),u=Object(c.c)((function(t){return t.organizations})).selectedOrganization;return Object(s.jsx)(o.b,Object(a.a)(Object(a.a)({},n),{},{render:function(t){return(null===u||void 0===u?void 0:u.role)==r.a.PLAYER?Object(s.jsx)(o.a,{to:{pathname:"/admin",search:t.location.search,state:{from:t.location}}}):Object(s.jsx)(e,Object(a.a)({},t))}}))}},428:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var a=n(68),i=n(102),c=n(159),o=function(){return function(t){t(Object(c.d)()),Object(i.a)(Object(a.a)("organizationInvites"),{method:"GET"}).then((function(e){if("OK"!=e.status)throw new Error(e);t(Object(c.c)(e.invites))})).catch((function(e){t(Object(c.c)([],e))}))}}},601:function(t,e,n){"use strict";n.r(e);var a=n(2),i=n(14),c=n(0),o=n.n(c),r=n(229),s=n(230),l=n(70),u=n(88),d=n(490),b=n(277),j=n(280),p=n(327),m=n(538),h=n(346),O=n(275),f=n(457),v=n(459),g=n(414),x=n(431),y=n.n(x),w=n(484),I=n.n(w),k=n(485),N=n.n(k),A=n(486),L=n.n(A),z=n(487),C=n.n(z),E=n(488),P=n.n(E),R=n(458),S=n(165),D=n(85),T=n(36),B=n(3),U=n(236),W=242,G=Object(U.a)((function(t){var e,n;return{title:{flexGrow:1,alignItems:"center"},betaBadge:{backgroundColor:t.palette.primary.main,color:"white",paddingTop:2,paddingBottom:2,paddingLeft:4,paddingRight:4,fontSize:t.typography.overline.fontSize,borderRadius:4,marginLeft:4},nav:Object(B.a)({},t.breakpoints.up("sm"),{width:240,flexShrink:0}),drawer:{flexDirection:"column",height:"100%",background:"linear-gradient(358.88deg, rgba(212, 170, 255, 0.71) 0.96%, rgba(255, 179, 237, 0.6) 42.34%, rgba(255, 208, 189, 0.5) 80.14%, rgba(255, 238, 201, 0.5) 99.04%)","& .MuiTypography-body1":{fontWeight:500}},appBar:(e={},Object(B.a)(e,t.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:W}),Object(B.a)(e,"backgroundColor","rgb(255 255 255)"),Object(B.a)(e,"-webkit-backdrop-filter","saturate(180%)blur(12px)"),Object(B.a)(e,"backdrop-filter","saturate(180%)blur(12px)"),Object(B.a)(e,"-o-backdrop-filter","saturate(180%)blur(12px)"),Object(B.a)(e,"-ms-backdrop-filter","saturate(180%)blur(12px)"),e),shadow:{boxShadow:"rgba(149, 157, 165, 0.2) 0px 8px 24px"},menuButton:Object(B.a)({marginRight:t.spacing(2)},t.breakpoints.up("sm"),{display:"none"}),toolbar:t.mixins.toolbar,drawerPaper:{width:W},content:(n={},Object(B.a)(n,t.breakpoints.up("sm"),{marginLeft:W}),Object(B.a)(n,"padding",t.spacing(3)),n),userInfo:{alignItems:"center",padding:12,cursor:"pointer",borderBottom:"1px solid #e0e0e0","&:hover":{backgroundColor:"#e1e4e5"}},userAvatar:{marginRight:10},userName:{color:t.palette.text.primary,marginBottom:3,lineHeight:1.2,textOverflow:"ellipsis",overflow:"hidden"},organizationName:{color:t.palette.text.secondary,fontSize:t.typography.body2.fontSize,textTransform:"capitalize",textOverflow:"ellipsis",overflow:"hidden"},listItem:Object(a.a)(Object(a.a)({},t.typography.body1),{},{color:t.palette.primary.main,padding:"4px 16px",cursor:"pointer","& .MuiListItemIcon-root":{color:t.palette.primary.main},"&$selected, &$selected:hover":{backgroundColor:t.palette.primary.main,color:"white","& .MuiListItemIcon-root":{color:"white"}},"&:hover:not(.Mui-disabled)":{backgroundColor:"#8399fc",color:"white","& .MuiListItemIcon-root":{color:"white"}}}),selected:{},lastActivity:{borderRadius:4,padding:"4px 12px",marginLeft:"auto",background:"linear-gradient(90deg, rgba(212, 170, 255, 0.71) 0.96%, rgba(255, 179, 237, 0.6) 42.34%, rgba(255, 208, 189, 0.5) 80.14%, rgba(255, 238, 201, 0.5) 99.04%)",display:"flex",alignItems:"center"},lastActivityName:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":1,lineClamp:1,"-webkit-box-orient":"vertical"}}})),K=n(168),M=n(129),F=n(428),Y=n(489),H=n(560),J=n(224),_=n(328),q=(n(169),n(562)),$=n(563),Q=n(564),V=n(336),X=n(533),Z=n(174),tt=n(68),et=n(102),nt=n(171),at=n(25),it=n(413),ct=n(173),ot=n(6),rt=Object(u.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(44)]).then(n.bind(null,537))}),{fallback:Object(ot.jsx)(l.a,{})}),st=Object(u.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(43)]).then(n.bind(null,572))}),{fallback:Object(ot.jsx)(l.a,{})}),lt=Object(u.a)((function(){return Promise.all([n.e(1),n.e(37)]).then(n.bind(null,598))}),{fallback:Object(ot.jsx)(l.a,{})}),ut=Object(u.a)((function(){return n.e(45).then(n.bind(null,573))}),{fallback:Object(ot.jsx)(l.a,{})});e.default=function(t){var e=G(""),n=Object(r.i)().url,l=Object(r.g)(),u=Object(T.b)(),x=Object(r.h)(),w=Object(K.a)(),k=Object(c.useRef)(null),A=Object(T.c)((function(t){return t.liveGame})).activity,z=Object(T.c)((function(t){return t.auth})).user,E=Object(T.c)((function(t){return t.organizationInvites})),B=E.organizationInvites_requested,U=E.organizationInvites_error,W=E.organizationInvites,dt=Object(T.c)((function(t){return t.organizations})).selectedOrganization,bt=o.a.useState(!1),jt=Object(i.a)(bt,2),pt=jt[0],mt=jt[1],ht=o.a.useState(!1),Ot=Object(i.a)(ht,2),ft=Ot[0],vt=Ot[1],gt=Object(M.b)(null,"selectedOrganization"),xt=Object(i.a)(gt,2),yt=(xt[0],xt[1]);o.a.useEffect((function(){B||null!=U||u(Object(F.a)()),(null===dt||void 0===dt?void 0:dt.role)!=nt.a.PLAYER&&Object(et.a)(Object(tt.a)("getCurPlan")).then((function(t){"OK"==t.status&&t.planId==ct.a.FREE&&vt(!0)}));var t=function(){k.current&&(window.scrollY>0?k.current.classList.add(e.shadow):k.current.classList.remove(e.shadow))};return window.addEventListener("scroll",t),function(){window.removeEventListener("scroll",t)}}),[]);var wt=[{name:"Activities",Icon:I.a,pathname:"".concat(n,"/activities"),action:function(t){return l.push(t.pathname)}},{name:"Upcoming",Icon:N.a,pathname:"".concat(n,"/upcomingActivities"),action:function(t){return l.push(t.pathname)}},{name:"History",Icon:q.a,pathname:"".concat(n,"/history"),action:function(t){return l.push(t.pathname)}},{name:"Users",Icon:L.a,pathname:"".concat(n,"/users"),action:function(t){return l.push(t.pathname)}},{name:"Settings",Icon:C.a,pathname:"".concat(n,"/settings"),action:function(t){return l.push(t.pathname)},hidden:(null===dt||void 0===dt?void 0:dt.role)==nt.a.PLAYER},{name:"Billing",Icon:$.a,pathname:"".concat(n,"/billing"),action:function(t){return l.push(t.pathname)},hidden:(null===dt||void 0===dt?void 0:dt.role)==nt.a.PLAYER}],It=[{name:"Sign Out",Icon:P.a,action:function(t){return D.a.signOut()}}],kt=wt.find((function(t){return x.pathname.startsWith(t.pathname)}));null!==kt&&void 0!==kt&&kt.hidden&&l.replace("/admin");var Nt=function(){mt(!1)},At=Object(ot.jsxs)("div",{className:"".concat(e.drawer," cFlex"),children:[Object(ot.jsx)("div",{className:e.toolbar,style:{minHeight:"fit-content"},children:Object(ot.jsxs)(b.a,{display:"flex",className:"".concat(e.userInfo," cWidthFillAvailable"),onClick:function(){yt(null),l.push("/selectGroup",{from:l.location})},children:[W&&W.length>0?Object(ot.jsx)(Y.a,{badgeContent:W.length,overlap:"circle",color:"primary",anchorOrigin:{vertical:"top",horizontal:"left"},children:Object(ot.jsx)(j.a,{className:e.userAvatar,alt:(null===z||void 0===z?void 0:z.displayName)||"",src:(null===z||void 0===z?void 0:z.photoURL)||""},(null===z||void 0===z?void 0:z.displayName)||"")}):Object(ot.jsx)(j.a,{className:e.userAvatar,alt:(null===z||void 0===z?void 0:z.displayName)||"",src:(null===z||void 0===z?void 0:z.photoURL)||""},(null===z||void 0===z?void 0:z.displayName)||""),Object(ot.jsxs)(b.a,{maxWidth:136,children:[Object(ot.jsx)(S.a,{className:[e.userName,"maxLines2"].join(" "),children:null===z||void 0===z?void 0:z.displayName}),Object(ot.jsx)(S.a,{className:e.organizationName,children:null===dt||void 0===dt?void 0:dt.organizationName})]}),Object(ot.jsx)("div",{style:{flexGrow:1}}),Object(ot.jsx)(Q.a,{color:"disabled",fontSize:"small"})]})}),Object(ot.jsx)(O.a,{children:wt.filter((function(t){return!t.hidden})).map((function(t,n){return Object(ot.jsxs)(f.a,{selected:l.location.pathname.startsWith(t.pathname),onClick:function(){t.action(t),Nt()},classes:{root:e.listItem,selected:e.selected},children:[Object(ot.jsx)(v.a,{style:{minWidth:42},children:Object(ot.jsx)(t.Icon,{})}),Object(ot.jsx)(g.a,{primary:t.name})]},n)}))}),Object(ot.jsx)("div",{className:"cHeightFillAvailable"}),Object(ot.jsx)(O.a,{children:It.map((function(t,n){return Object(ot.jsxs)(f.a,{onClick:function(){return t.action(t)},classes:{root:e.listItem,selected:e.selected},children:[Object(ot.jsx)(v.a,{style:{minWidth:42},children:Object(ot.jsx)(t.Icon,{})}),Object(ot.jsx)(g.a,{primary:t.name})]},n)}))})]});return Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsx)(d.a,{ref:k,position:"sticky",className:e.appBar,elevation:0,children:Object(ot.jsxs)(R.a,{children:[Object(ot.jsx)(p.a,{edge:"start",className:e.menuButton,"aria-label":"menu",onClick:function(){mt(!pt)},children:Object(ot.jsx)(y.a,{})}),Object(ot.jsx)(Z.a,{style:{marginRight:16}}),A?Object(ot.jsxs)(b.a,{className:e.lastActivity,children:[Object(ot.jsx)(H.a,{arrow:!0,title:"Players of last activity will be notified when you will start new game.",placement:"bottom-end",children:Object(ot.jsx)(S.a,{color:"primary",className:e.lastActivityName,children:A.name})}),Object(ot.jsx)(H.a,{title:"Don't notify players of this activity.",children:Object(ot.jsx)(p.a,{style:{padding:4,marginLeft:6},onClick:function(){w.show("Don't Notify Players of Last Activity","",["Cancel","Don't Notify"],!1).then((function(t){"Don't Notify"==t&&u(Object(at.jb)({myActivity:null,activity:null,users:null}))}))},children:Object(ot.jsx)(V.a,{style:{fontSize:"1rem"}})})})]}):Object(ot.jsx)(J.a,{in:ft&&!x.pathname.startsWith("/admin/billing"),children:Object(ot.jsxs)(b.a,{display:"flex",alignItems:"center",style:{gap:12,marginLeft:"auto"},children:[Object(ot.jsx)(h.a,{mdDown:!0,implementation:"css",children:Object(ot.jsx)(S.a,{color:"textPrimary",children:"You're currently on the Free Plan"})}),Object(ot.jsx)(_.a,{variant:"contained",color:"primary",component:s.a,to:"/admin/billing",children:"Upgrade"})]})})]})}),Object(ot.jsxs)("nav",{className:e.nav,children:[Object(ot.jsx)(h.a,{smUp:!0,children:Object(ot.jsx)(m.a,{variant:"temporary",open:pt,onClose:Nt,classes:{paper:e.drawerPaper},ModalProps:{keepMounted:!0},children:At})}),Object(ot.jsx)(h.a,{xsDown:!0,children:Object(ot.jsx)(m.a,{classes:{paper:e.drawerPaper},variant:"permanent",open:!0,children:At})})]}),Object(ot.jsx)("main",{className:e.content,children:Object(ot.jsx)(r.c,{history:l,children:Object(ot.jsxs)(r.d,{children:[Object(ot.jsx)(r.b,{path:"".concat(n,"/activities"),component:rt}),Object(ot.jsx)(r.b,{path:"".concat(n,"/users"),component:st}),Object(ot.jsx)(it.a,{path:"".concat(n,"/settings"),Component:lt}),Object(ot.jsx)(it.a,{path:"".concat(n,"/billing"),Component:ut}),Object(ot.jsx)(r.b,{path:"".concat(n,"/upcomingActivities/:myActivityId?"),render:function(t){return Object(ot.jsx)(X.default,Object(a.a)(Object(a.a)({},t),{},{type:"upcoming"}))}}),Object(ot.jsx)(r.b,{path:"".concat(n,"/history/:myActivityId?"),render:function(t){return Object(ot.jsx)(X.default,Object(a.a)(Object(a.a)({},t),{},{type:"history"}))}}),Object(ot.jsx)(r.a,{to:"".concat(n,"/activities")})]})})})]})}}}]);